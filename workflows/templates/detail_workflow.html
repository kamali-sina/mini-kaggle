{% extends 'data_platform/basic.html' %}
{% load static %}

{% block head %}
<style>li {
    font-size: 17px;
    list-style: none;
    margin: 15px auto;
}


</style>
{% endblock %}

{% block title %}Workflow Details{% endblock %}

{% block body %}


<div class="ui segment">
    <ul>
        <li><strong>Name: </strong>{{ workflow.name }}</li>

        <li><strong>Creator: </strong>
            {% if workflow.creator.get_full_name %}
            {{ workflow.creator.get_full_name }}
            {% else %}
            {{ workflow.creator.username }}
            {% endif %}
        </li>
        <div>
            <br>
            <h3>Tasks:</h3>
            {% if workflow.task_set.all %}
            <div class="ui relaxed divided list">
                {% for task in workflow.task_set.all %}
                <div class="item">
                    <i class="large tasks middle aligned icon"></i>
                    <div class="content">
                        <a class="header" href="{% url 'workflows:detail_task' task.id %}">{{ task.name }}</a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <li>No tasks registered to the workflow</li>
            {% endif %}
            <a href="{% url 'workflows:create_task' %}">add new task</a>
        </div>
        <br>
        <div style="display: flex;">
            <form method="post" style="margin: 10px;" action="delete/">
                {% csrf_token %}
                <input type="submit" value="Delete Workflow" class="negative ui button">
            </form>
            <form method="post" style="margin: 10px;" action="run/">
                {% csrf_token %}
                <input type="submit" value="Run Workflow" class="ui button">
            </form>
            <span style="margin: 10px;">
                <a href="{% url 'workflows:schedule_workflow' workflow.id %}" class="ui button">Schedule</a>
            </span>
        </div>
    </ul>
</div>


{% endblock %}